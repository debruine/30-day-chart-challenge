<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>10 Experimental | 30-day Chart Challenge</title>
<meta name="author" content="Lisa DeBruine">
<meta name="description" content="Today I'm going to use faux to generate some simulated data for a factorial experimental design and make some plots. library(faux)   # for data simulation library(ggplot2)  # for plotting...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="10 Experimental | 30-day Chart Challenge">
<meta property="og:type" content="book">
<meta property="og:url" content="https://debruine.github.io/30-day-chart-challenge/experimental.html">
<meta property="og:image" content="https://debruine.github.io/30-day-chart-challenge/images/logos/logo.png">
<meta property="og:description" content="Today I'm going to use faux to generate some simulated data for a factorial experimental design and make some plots. library(faux)   # for data simulation library(ggplot2)  # for plotting...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="10 Experimental | 30-day Chart Challenge">
<meta name="twitter:description" content="Today I'm going to use faux to generate some simulated data for a factorial experimental design and make some plots. library(faux)   # for data simulation library(ggplot2)  # for plotting...">
<meta name="twitter:image" content="https://debruine.github.io/30-day-chart-challenge/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1.9000/transition.js"></script><script src="libs/bs3compat-0.3.1.9000/tabs.js"></script><script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.20/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><script src="libs/rglWebGL-binding-0.108.3/rglWebGL.js"></script><link href="libs/rglwidgetClass-0.108.3/rgl.css" rel="stylesheet">
<script src="libs/rglwidgetClass-0.108.3/rglClass.min.js"></script><script src="libs/CanvasMatrix4-0.108.3/CanvasMatrix.min.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="2022">30-day Chart Challenge</a>:
        <small class="text-muted">2022</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li class="book-part">Comparisons</li>
<li><a class="" href="part-to-whole.html"><span class="header-section-number">1</span> Part-to-whole</a></li>
<li><a class="" href="pictogram.html"><span class="header-section-number">2</span> Pictogram</a></li>
<li><a class="" href="historical.html"><span class="header-section-number">3</span> Historical</a></li>
<li><a class="" href="flora.html"><span class="header-section-number">4</span> Flora</a></li>
<li><a class="" href="slope.html"><span class="header-section-number">5</span> Slope</a></li>
<li><a class="" href="owid.html"><span class="header-section-number">6</span> OWiD</a></li>
<li class="book-part">Distributions</li>
<li><a class="" href="physical.html"><span class="header-section-number">7</span> Physical</a></li>
<li><a class="" href="mountains.html"><span class="header-section-number">8</span> Mountains</a></li>
<li><a class="" href="statistics.html"><span class="header-section-number">9</span> Statistics</a></li>
<li><a class="active" href="experimental.html"><span class="header-section-number">10</span> Experimental</a></li>
<li><a class="" href="circular.html"><span class="header-section-number">11</span> Circular</a></li>
<li><a class="" href="the-economist.html"><span class="header-section-number">12</span> The Economist</a></li>
<li class="book-part">Relationships</li>
<li><a class="" href="correlation.html"><span class="header-section-number">13</span> Correlation</a></li>
<li><a class="" href="dimensional.html"><span class="header-section-number">14</span> 3-dimensional</a></li>
<li><a class="" href="multivariate.html"><span class="header-section-number">15</span> Multivariate</a></li>
<li><a class="" href="environment.html"><span class="header-section-number">16</span> Environment</a></li>
<li><a class="" href="connections.html"><span class="header-section-number">17</span> Connections</a></li>
<li><a class="" href="oecd.html"><span class="header-section-number">18</span> OECD</a></li>
<li class="book-part">Timeseries</li>
<li><a class="" href="global-challenge.html"><span class="header-section-number">19</span> Global Challenge</a></li>
<li><a class="" href="new-tool.html"><span class="header-section-number">20</span> New Tool</a></li>
<li><a class="" href="downupwards.html"><span class="header-section-number">21</span> Down/Upwards</a></li>
<li><a class="" href="animation.html"><span class="header-section-number">22</span> Animation</a></li>
<li><a class="" href="tiles.html"><span class="header-section-number">23</span> Tiles</a></li>
<li><a class="" href="financial-times.html"><span class="header-section-number">24</span> Financial Times</a></li>
<li class="book-part">Uncertainties</li>
<li><a class="" href="trend.html"><span class="header-section-number">25</span> Trend</a></li>
<li><a class="" href="interactive.html"><span class="header-section-number">26</span> Interactive</a></li>
<li><a class="" href="future.html"><span class="header-section-number">27</span> Future</a></li>
<li><a class="" href="deviations.html"><span class="header-section-number">28</span> Deviations</a></li>
<li><a class="" href="storytelling.html"><span class="header-section-number">29</span> Storytelling</a></li>
<li><a class="" href="un-population.html"><span class="header-section-number">30</span> UN Population</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="colours.html"><span class="header-section-number">A</span> Colours</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/debruine/30-day-chart-challenge">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="experimental" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Experimental<a class="anchor" aria-label="anchor" href="#experimental"><i class="fas fa-link"></i></a>
</h1>
<p>Today I'm going to use faux to generate some simulated data for a factorial experimental design and make some plots.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/debruine/faux">faux</a></span><span class="op">)</span>      <span class="co"># for data simulation</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>   <span class="co"># for plotting</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span> <span class="co"># for multi-panel plots</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/theme_get.html">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">8675309</span><span class="op">)</span>  <span class="co"># for reproducibility</span></code></pre></div>
<div id="data-2" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Data<a class="anchor" aria-label="anchor" href="#data-2"><i class="fas fa-link"></i></a>
</h2>
<p>The <code><a href="https://rdrr.io/pkg/faux/man/sim_design.html">sim_design()</a></code> function is meant to make the simulation of data for factorial designs easier. You can name the factors and their levels (see extensive <a href="https://debruine.github.io/faux/">vignettes</a>), but here we'll just use the generic naming from faux and only specify the number of levels of each factor. By default, it simulates 100 observations in each between group, with means of 0 and standard deviations of 1. The function also produces a design plot.</p>
<div id="one-factor" class="section level3" number="10.1.1">
<h3>
<span class="header-section-number">10.1.1</span> One factor<a class="anchor" aria-label="anchor" href="#one-factor"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/sim_design.html">sim_design</a></span><span class="op">(</span>between <span class="op">=</span> <span class="fl">2</span>, 
                 mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="30DCC_files/figure-html/exp-b2-sim-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>For within-subject designs, you have to specify the correlation between each level. If there are any within factors, the <code><a href="https://rdrr.io/pkg/faux/man/get_params.html">check_sim_stats()</a></code> table will include the sampled correlations. You can turn off the design plot with <code>plot = FALSE</code>.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/sim_design.html">sim_design</a></span><span class="op">(</span>within <span class="op">=</span> <span class="fl">2</span>, 
                 mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,
                 sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,
                 r <span class="op">=</span> <span class="fl">0.5</span>,
                 plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_params.html">check_sim_stats</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:right;">
n
</th>
<th style="text-align:left;">
var
</th>
<th style="text-align:right;">
W1a
</th>
<th style="text-align:right;">
W1b
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
W1a
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
1.05
</td>
</tr>
<tr>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
W1b
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
-0.47
</td>
<td style="text-align:right;">
5.52
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="two-factors" class="section level3" number="10.1.2">
<h3>
<span class="header-section-number">10.1.2</span> Two factors<a class="anchor" aria-label="anchor" href="#two-factors"><i class="fas fa-link"></i></a>
</h3>
<p>You can also give the factors names and labels. You can set the correlations separately for each between-subject cell.</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># df version uses row and column labels, </span>
<span class="co"># so allows rows and columns to be out of order</span>
<span class="va">mu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span>,
                 dog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">1</span><span class="op">)</span>,
                 row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"am"</span>, <span class="st">"pm"</span><span class="op">)</span><span class="op">)</span>

<span class="va">w2b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/sim_design.html">sim_design</a></span><span class="op">(</span>within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"am"</span>, <span class="st">"pm"</span><span class="op">)</span><span class="op">)</span>, 
                   between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span><span class="op">)</span><span class="op">)</span>,
                   mu <span class="op">=</span> <span class="va">mu</span>,
                   dv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Something Score"</span><span class="op">)</span>,
                   r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>cat <span class="op">=</span> <span class="fl">0</span>,
                            dog <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span>,
                   long <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="30DCC_files/figure-html/unnamed-chunk-83-1.png" width="100%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_params.html">check_sim_stats</a></span><span class="op">(</span><span class="va">w2b2</span><span class="op">)</span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
pet
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:left;">
var
</th>
<th style="text-align:right;">
am
</th>
<th style="text-align:right;">
pm
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
am
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
-0.07
</td>
<td style="text-align:right;">
1.03
</td>
</tr>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
pm
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.52
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
<tr>
<td style="text-align:left;">
dog
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
am
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
0.19
</td>
<td style="text-align:right;">
1.07
</td>
</tr>
<tr>
<td style="text-align:left;">
dog
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
pm
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.07
</td>
<td style="text-align:right;">
0.94
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div id="plots" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Plots<a class="anchor" aria-label="anchor" href="#plots"><i class="fas fa-link"></i></a>
</h2>
<div id="data-plots" class="section level3" number="10.2.1">
<h3>
<span class="header-section-number">10.2.1</span> Data Plots<a class="anchor" aria-label="anchor" href="#data-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Now it's time for the fun part: making plots! The <code><a href="https://r-spatial.github.io/sf/reference/plot.html">plot()</a></code> function makes it easy to plot data made with faux. See the <a href="https://debruine.github.io/faux/articles/plots.html">plotting vignette</a> for more details.</p>
<p>The output is a ggplot, so you can add more ggplot options to it.</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">b2</span>, geoms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"violin"</span>, <span class="st">"box"</span><span class="op">)</span>, palette <span class="op">=</span> <span class="st">"Accent"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Between-Subject Factor"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="30DCC_files/figure-html/exp-b2-plot-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="design-plots" class="section level3" number="10.2.2">
<h3>
<span class="header-section-number">10.2.2</span> Design Plots<a class="anchor" aria-label="anchor" href="#design-plots"><i class="fas fa-link"></i></a>
</h3>
<p>You can also plot the design (not the data). If you plot a violin, the shape will be estimated by simulating a very large sample with these parameters.</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_design.html">get_design</a></span><span class="op">(</span><span class="va">w2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/faux/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span>geoms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"violin"</span>, <span class="st">"pointrangeSD"</span><span class="op">)</span>, palette <span class="op">=</span> <span class="st">"Dark2"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Within-Subject Factor"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="30DCC_files/figure-html/exp-w2-plot-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="combo-plots" class="section level3" number="10.2.3">
<h3>
<span class="header-section-number">10.2.3</span> Combo Plots<a class="anchor" aria-label="anchor" href="#combo-plots"><i class="fas fa-link"></i></a>
</h3>
<p>Create a design plot for the main effects and interaction in <code>w2b2</code>. You can specify the order color, x, facet row(s), facet col(s) [this function needs a little work to be more intuitive]. Add a title and custom colours (you'll get a warning about the duplicate scale for fill; just ignore it).</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"violin"</span>, <span class="st">"pointrangeSD"</span><span class="op">)</span>
<span class="va">b_colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"red3"</span>, <span class="st">"dodgerblue3"</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>
<span class="va">w_colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkorchid"</span>, <span class="st">"darkorange"</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>
<span class="va">b_fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"red3"</span>, <span class="st">"dodgerblue3"</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>
<span class="va">w_fill</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkorchid"</span>, <span class="st">"darkorange"</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="va">plot_b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_design.html">get_design</a></span><span class="op">(</span><span class="va">w2b2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/faux/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span>geoms <span class="op">=</span> <span class="va">geoms</span>, <span class="st">"pet"</span>, <span class="st">"pet"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="va">b_colors</span> <span class="op">+</span> <span class="va">b_fill</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Main Effect of Pet Type"</span><span class="op">)</span>

<span class="va">plot_w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_design.html">get_design</a></span><span class="op">(</span><span class="va">w2b2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/faux/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span>geoms <span class="op">=</span> <span class="va">geoms</span>, <span class="st">"time"</span>, <span class="st">"time"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="va">w_colors</span> <span class="op">+</span> <span class="va">w_fill</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Main Effect of Time of Day"</span><span class="op">)</span>

<span class="va">plot_w2b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_design.html">get_design</a></span><span class="op">(</span><span class="va">w2b2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/faux/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span>geoms <span class="op">=</span> <span class="va">geoms</span>, <span class="st">"time"</span>, <span class="st">"pet"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="va">w_colors</span> <span class="op">+</span> <span class="va">w_fill</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Interaction between Time of Day and Pet Type"</span><span class="op">)</span>

<span class="va">plot_b2w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/faux/man/get_design.html">get_design</a></span><span class="op">(</span><span class="va">w2b2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/faux/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span>geoms <span class="op">=</span> <span class="va">geoms</span>, <span class="st">"pet"</span>, <span class="st">"time"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="va">b_colors</span> <span class="op">+</span> <span class="va">b_fill</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, title <span class="op">=</span> <span class="st">"Interaction between Pet Type and Time of Day"</span><span class="op">)</span></code></pre></div>
<p>Combine with <code class="package">patchwork</code></p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">layout</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"AB"</span>, <span class="st">"CC"</span>, <span class="st">"DD"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span>
<span class="va">plot_b2</span>  <span class="op">+</span> <span class="va">plot_w2</span> <span class="op">+</span> <span class="va">plot_w2b2</span> <span class="op">+</span> <span class="va">plot_b2w2</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/patchwork/man/plot_layout.html">plot_layout</a></span><span class="op">(</span>design <span class="op">=</span> <span class="va">layout</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="30DCC_files/figure-html/exp-day10-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><div class="chapter-nav">
<div class="prev"><a href="statistics.html"><span class="header-section-number">9</span> Statistics</a></div>
<div class="next"><a href="circular.html"><span class="header-section-number">11</span> Circular</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#experimental"><span class="header-section-number">10</span> Experimental</a></li>
<li>
<a class="nav-link" href="#data-2"><span class="header-section-number">10.1</span> Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#one-factor"><span class="header-section-number">10.1.1</span> One factor</a></li>
<li><a class="nav-link" href="#two-factors"><span class="header-section-number">10.1.2</span> Two factors</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#plots"><span class="header-section-number">10.2</span> Plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-plots"><span class="header-section-number">10.2.1</span> Data Plots</a></li>
<li><a class="nav-link" href="#design-plots"><span class="header-section-number">10.2.2</span> Design Plots</a></li>
<li><a class="nav-link" href="#combo-plots"><span class="header-section-number">10.2.3</span> Combo Plots</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/debruine/30-day-chart-challenge/blob/master/book/02-distributions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/debruine/30-day-chart-challenge/edit/master/book/02-distributions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>30-day Chart Challenge</strong>: 2022" was written by Lisa DeBruine. It was last built on 2022-04-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
